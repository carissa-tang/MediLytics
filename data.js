// Leanne
var meningitisS = [
  "Pennsylvania",
  "California",
  "Illinois",
  "Maryland",
  "New York",
  "Virginia",
  "Delaware",
  "Washington",
  "District of Columbia",
  "Florida",
  "North Carolina",
  "Georgia",
  "Massachusetts"
];
var meningitis = [
  1.976450219,
  2.099024568,
  1.805266814,
  1.916236153,
  2.223823043,
  1.763448071,
  1.886868774,
  2.458278092,
  2.948631088,
  2.455801344,
  1.997683334,
  2.340531515,
  3.396799845
];
var brainCancerS = [
  "Pennsylvania",
  "Illinois",
  "Delaware",
  "Virginia",
  "Maryland",
  "District of Columbia",
  "Massachusetts",
  "Florida",
  "Georgia",
  "Washington",
  "California",
  "New York",
  "North Carolina"
];
var brainCancer = [
  2.175324355,
  2.20003886,
  1.999986329,
  2.113991387,
  2.183448153,
  1.815228116,
  2.264661476,
  2.337119766,
  1.909737007,
  1.734207511,
  2.620068704,
  2.098716324,
  2.041790543
]

var cervicalCancerS = ["Illinois",
  "Pennsylvania",
  "Maryland",
  "California",
  "Massachusetts",
  "Virginia",
  "Delaware",
  "New York",
  "District of Columbia",
  "Washington",
  "Florida",
  "North Carolina",
  "Georgia"
];
var cervicalCancer = [0.233842963,
  0.238067413,
  0.249425413,
  0.185279348,
  0.187207423,
  0.22040579,
  0.232763925,
  0.226230815,
  0.443896065,
  0.196679918,
  0.27635645,
  0.241773147,
  0.228436525
];
var colonCancerS = ["Illinois",
  "Pennsylvania",
  "Maryland",
  "Virginia",
  "Delaware",
  "New York",
  "District of Columbia",
  "Washington",
  "Massachusetts",
  "North Carolina",
  "Florida",
  "Georgia",
  "California"
];
var colonCancer = [0.564949493,
  0.559824694,
  0.62030618,
  0.508597511,
  0.493523824,
  0.503192485,
  0.712586868,
  0.446088307,
  0.532362788,
  0.47909426,
  0.5554937,
  0.542342802,
  0.454245087
];
var encephalitisS = ["Pennsylvania",
  "California",
  "Illinois",
  "Maryland",
  "Virginia",
  "Delaware",
  "New York",
  "Washington",
  "District of Columbia",
  "Florida",
  "North Carolina",
  "Georgia",
  "Massachusetts"
];
var encephalitis = [1.008112269,
  0.803618362,
  0.829500084,
  0.968516934,
  0.861751212,
  0.777374013,
  1.025664665,
  0.749056646,
  0.825253453,
  0.758785612,
  0.662681009,
  0.771830051,
  1.006138108
];
var kidneyCancerS = ["Pennsylvania",
  "Illinois",
  "Delaware",
  "Virginia",
  "Maryland",
  "District of Columbia",
  "Massachusetts",
  "Florida",
  "Georgia",
  "Washington",
  "California",
  "New York",
  "North Carolina"
];
var kidneyCancer = [0.438126247,
  0.473802553,
  0.396475081,
  0.40536232,
  0.472447754,
  0.490996174,
  0.361788286,
  0.442899284,
  0.435784549,
  0.377009519,
  0.348285549,
  0.345862461,
  0.433708512
];
var asthmaS = ["Illinois",
  "California",
  "Pennsylvania",
  "North Carolina",
  "New York",
  "Delaware",
  "District of Columbia",
  "Massachusetts",
  "Virginia",
  "Washington",
  "Maryland",
  "Florida",
  "Georgia"
];
var asthma = [1206.493581,
  1166.035213,
  1292.468391,
  1133.447322,
  1330.231736,
  1349.030408,
  1172.574503,
  1251.639322,
  1238.674899,
  1155.851846,
  1261.57946,
  1146.287415,
  1161.967711
];
var liverCancerS = ["Illinois",
  "Pennsylvania",
  "Maryland",
  "California",
  "Massachusetts",
  "New York",
  "District of Columbia",
  "Washington",
  "North Carolina",
  "Florida",
  "Georgia",
  "Delaware",
  "Virginia"
];
var liverCancer = [0.204589633,
  0.207261922,
  0.2201419,
  0.196499299,
  0.230473599,
  0.201372785,
  0.304855759,
  0.26671532,
  0.189450391,
  0.209586502,
  0.18734511,
  0.196093366,
  0.200767178
];
var ovarianCancerS = ["Pennsylvania",
  "Illinois",
  "Delaware",
  "Virginia",
  "Maryland",
  "New York",
  "District of Columbia",
  "Massachusetts",
  "Florida",
  "Washington",
  "Georgia",
  "California",
  "North Carolina"
];
var ovarianCancer = [0.468681894,
  0.468181372,
  0.431739308,
  0.467023105,
  0.486653769,
  0.442349162,
  0.5291486,
  0.444410382,
  0.511621101,
  0.463021905,
  0.489074926,
  0.484520956,
  0.440607498
];
var anxietyS = ["Illinois",
  "Pennsylvania",
  "Delaware",
  "California",
  "Virginia",
  "District of Columbia",
  "Washington",
  "New York",
  "Massachusetts",
  "Maryland",
  "North Carolina",
  "Florida",
  "Georgia"
];
var anxiety = [1074.34663,
  1076.774222,
  1078.035456,
  1062.252493,
  1076.468644,
  1123.399216,
  1070.240752,
  1077.801507,
  1081.424631,
  1069.64166,
  1055.514835,
  1073.380108,
  1069.975727,
  1073.380108
];
var stiS = ["Illinois",
  "California",
  "New York",
  "Pennsylvania",
  "North Carolina",
  "Delaware",
  "Maryland",
  "Georgia",
  "Virginia",
  "Massachusetts",
  "District of Columbia",
  "Washington",
  "Florida"
];
var sti = [3903.87546,
  4801.232986,
  4501.56994,
  4429.509778,
  3900.458147,
  3943.554281,
  4752.691119,
  4447.359771,
  3923.212863,
  4027.176984,
  6575.031376,
  4031.297318,
  3811.070798
];
var testicularCancerS = ["Pennsylvania",
  "Illinois",
  "Delaware",
  "Virginia",
  "Maryland",
  "District of Columbia",
  "Massachusetts",
  "Florida",
  "Washington",
  "Georgia",
  "California",
  "New York",
  "North Carolina"
];
var testicularCancer = [2.740046093,
  2.476670703,
  2.021775199,
  2.365892706,
  2.852312988,
  1.499613984,
  2.699558963,
  2.918239524,
  3.026535032,
  1.935157865,
  2.57906664,
  2.436209294,
  2.051958918
];
var thyroidCancerS = ["Pennsylvania",
  "Illinois",
  "Delaware",
  "Virginia",
  "Maryland",
  "District of Columbia",
  "Massachusetts",
  "Florida",
  "Georgia",
  "Washington",
  "California",
  "New York",
  "North Carolina"
];
var thyroidCancer = [0.523382282,
  0.514326105,
  0.458885327,
  0.498620097,
  0.534146514,
  0.613779899,
  0.533702702,
  0.544421565,
  0.41090643,
  0.412899885,
  0.66638955,
  0.546226333,
  0.461228707
];
var hivS = ["Pennsylvania",
  "Illinois",
  "California",
  "Delaware",
  "Virginia",
  "Maryland",
  "New York",
  "Washington",
  "Massachusetts",
  "District of Columbia",
  "North Carolina",
  "Georgia",
  "Florida"
];
var hiv = [11.34703284,
  11.96345249,
  10.20175212,
  25.77298756,
  12.11895473,
  22.53874588,
  19.76592011,
  7.978518498,
  8.993335457,
  59.40105767,
  15.88118435,
  26.95111559,
  31.14844787
];

// PLOTLY.JS GRAPH
var trace = {
  x: [],
  y: [],
  mode: 'lines+markers',
  type: 'bar'
};

var data = [trace];

var layout = {
  autosize: true,
  width: 800,
  height: 500,
  title: {
    text: '{{Condition}}',
    font: {
      family: 'Poppins, sans-serif',
      size: 24
    },
    xref: 'paper',
    x: 0.05,
  },
  xaxis: {
    automargin: true,
    title: {
      text: 'States (United States)',
      font: {
        family: 'Poppins, sans-serif',
        size: 18,
        color: '#7f7f7f'
      }
    },
  },
  yaxis: {
    automargin: true,
    title: {
      text: 'Incidence, rate per 100k',
      font: {
        family: 'Poppins, sans-serif',
        size: 18,
        color: '#7f7f7f'
      }
    }
  }
};

var config = {responsive: true}

var cancerId = ["meningitis", "brain-cancer", "cervical-cancer", "colon-cancer", "encephalitis", "kidney-cancer", "asthma", "liver-cancer", "ovarian-cancer", "anxiety", "sti", "testicular-cancer", "thyroid-cancer", "hiv"];
var cancerNames = ["Meningitis", "Brain and Central Nervous System Cancer", "Cervical Cancer", "Colon and Rectal Cancer", "Encephalitis", "Kidney Cancer", "Asthma", "Liver Cancer", "Ovarian Cancer", "Anxiety Disorders", " Sexually-Transmitted Infections (excluding HIV)", "Testicular Cancer", "Thyroid Cancer", "HIV/AIDS"];
var states = [meningitisS, brainCancerS, cervicalCancerS, colonCancerS, encephalitisS, kidneyCancerS, asthmaS, liverCancerS, ovarianCancerS, anxietyS, stiS, testicularCancerS, thyroidCancerS, hivS];
var rates = [meningitis, brainCancer, cervicalCancer, colonCancer, encephalitis, kidneyCancer, asthma, liverCancer, ovarianCancer, anxiety, sti, testicularCancer, thyroidCancer, hiv];

// CREATING RADIO INPUTS ON DATA.HTML
var filters = document.getElementById("filters");

for (var i = 0; i <= cancerId.length - 1; i++) {
  var label = document.createElement("label");
  var input = document.createElement("input");
  var br = document.createElement("br");
  input.type = "radio";
  input.name = "condition";
  input.id = cancerId[i];
  
  input.addEventListener("click", function(){
    for (var i = 0; i <= cancerId.length - 1; i++) {
      if (this.id === cancerId[i]) {
        makeGraph(cancerNames[i], states[i], rates[i]);
      }
    }
  });

  if (filters) {
    label.append(input);
    label.append(` ${cancerNames[i]}`);
    filters.append(label);
    filters.append(br);
  }
}

//MAKE GRAPH
function makeGraph(graphTitle, xAxis, yAxis) {
  var graph = document.getElementById("graph");
  //editing the data from the graph template
  layout.title.text = graphTitle;
  trace.x = [];
  trace.y = [];
  trace.x = trace.x.concat(xAxis);
  trace.y = trace.y.concat(yAxis);

  Plotly.newPlot(graph, data, layout);

  var graphSection = document.getElementById("graph-section");
  // graphSection.append(`The average incidence rate is: ${}`);
  
  var dataSource = document.getElementById("data-source");
  if (dataSource === null) {
    var div = document.createElement('div');
    div.innerHTML = "These numbers do not represent your chances of having the condition and are simply statistics of historical data. Please consult a healthcare professional for medical advice.<br><br>Source: <a href='http://ghdx.healthdata.org/gbd-results-tool' target='_blank'>http://ghdx.healthdata.org/gbd-results-tool</a> (2019)";
    div.id = "data-source";
    graphSection.append(div);
  }

  var infobtn = document.getElementById("infoBtn");
  if (infobtn === null) {
    var button = document.createElement("button");
    button.className = "btn-right";
    button.id = "infoBtn";
    button.innerHTML = "More Info";
    graphSection.append(button);
  }
   button.addEventListener("click", function(){
      localStorage.setItem("conditionName", graphTitle);
      window.location.href="https://medilytics.carissatang1.repl.co/info.html";
  });
}
  
  
      // button.addEventListener("click", function(){
      // localStorage.setItem("conditionName", graphTitle);
      // console.log(newTitle,localStorage.getItem("conditionName"));
      // window.location.href="https://medilytics.carissatang1.repl.co/info.html";
//if (lists===null){
 // var lists = [];
   // var number = -1;}
    //  number +=1;
//lists.insert(newTitle);
   //  console.log(newTitle,list[number]);
      // if (localStorage.getItem("conditionName") !== null){
     
      // $localStorage.conditionName={graphTitle};

      //That's what i'm thinking of doing, but the info screen now shows an object mouse event in the title. 
      // are we appending all the names to an array called newTitle and then taking the last value?
  